# zsh shpec build draft
language: zsh

# based from https://github.com/mafredri/zsh-async
addons:
  apt:
    packages:
      - build-essential
      - tree

env:
  global:
    - ZSH_DIST=$HOME/.zshdist
  matrix:
    # Use _ZSH_VERSION since if ZSH_VERSION is present, travis cacher thinks it
    # is running in zsh and tries to use zsh specific functions.
    - _ZSH_VERSION=5.3.1
    - _ZSH_VERSION=5.3
    - _ZSH_VERSION=5.2
    - _ZSH_VERSION=5.1.1
    - _ZSH_VERSION=5.0.8
    - _ZSH_VERSION=5.0.2

before_install:
  - curl -L https://zulu.sh/install | zsh && zsh
  - zulu install zvm
  - zvm use $_ZSH_VERSION

install:
  # install antigen
  - curl -L git.io/antigen  > ~/antigen.zsh
  - echo "source ~/antigen.zsh; antigen bundle rylnd/shpec; antigen apply" > ~/.zshrc
  - echo "setopt sh_word_split" > ~/.zshenv
  - zsh ~/.zshrc
  - export SHELL=zsh

script:
  - zsh --version
  - ./.travis-run.zsh
    # Check if shall not load diraction by hand

notifications:
  email: false
