#compdef _diraction-dispatch
# completion for the dispatcher command

#  words: 1:function 2:directory 3:pattern

case $words[3] in
    /*) # Pattern :D
	local diract=$words[2]
	local dirdir=`eval echo $diract`
	local pattern="${words[3]#/}"
	local cmd="$cd $dirdir && ls -d $pattern* 2>/dev/null  | sed -E 's:^:/:g' | xargs echo"

	for dir in $(eval $cmd)
	do
	    compadd $dir
	done && return 0
;;
    *)	# Basic argument
	_arguments "2: :(ls exec interactive)" && return 0
	# Â§LATER: more details!!
esac
